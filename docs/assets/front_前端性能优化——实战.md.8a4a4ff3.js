import{_ as l,D as o,o as p,c as e,G as t,z as s,a,R as c}from"./chunks/framework.3bbe0c8b.js";const r="/image-20230504214109485.png",y="/image-20230504214337410.png",b=JSON.parse('{"title":"ç™½å±ä¼˜åŒ–","description":"","frontmatter":{"layout":"doc","outline":"deep"},"headers":[],"relativePath":"front/å‰ç«¯æ€§èƒ½ä¼˜åŒ–â€”â€”å®æˆ˜.md","filePath":"front/å‰ç«¯æ€§èƒ½ä¼˜åŒ–â€”â€”å®æˆ˜.md"}'),D={name:"front/å‰ç«¯æ€§èƒ½ä¼˜åŒ–â€”â€”å®æˆ˜.md"},F=s("h1",{id:"ç™½å±ä¼˜åŒ–",tabindex:"-1"},[a("ç™½å±ä¼˜åŒ– "),s("a",{class:"header-anchor",href:"#ç™½å±ä¼˜åŒ–","aria-label":'Permalink to "ç™½å±ä¼˜åŒ–"'},"â€‹")],-1),i=s("h2",{id:"ä¼˜åŒ–èƒŒæ™¯-åŠ è½½æ—¶é—´å¯¹æ¯”",tabindex:"-1"},[a("ä¼˜åŒ–èƒŒæ™¯ (åŠ è½½æ—¶é—´å¯¹æ¯”) "),s("a",{class:"header-anchor",href:"#ä¼˜åŒ–èƒŒæ™¯-åŠ è½½æ—¶é—´å¯¹æ¯”","aria-label":'Permalink to "ä¼˜åŒ–èƒŒæ™¯ (åŠ è½½æ—¶é—´å¯¹æ¯”)"'},"â€‹")],-1),A=c('<h2 id="ä¸ºä»€ä¹ˆéœ€è¦ä¼˜åŒ–ç™½å±-fcp-æ—¶é—´" tabindex="-1">ä¸ºä»€ä¹ˆéœ€è¦ä¼˜åŒ–ç™½å±ï¼ˆFCPï¼‰æ—¶é—´ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦ä¼˜åŒ–ç™½å±-fcp-æ—¶é—´" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆéœ€è¦ä¼˜åŒ–ç™½å±ï¼ˆFCPï¼‰æ—¶é—´&quot;">â€‹</a></h2><ul><li>å¢å¼ºç”¨æˆ·ä½“éªŒ</li><li>æå‡é¡µé¢ç•™å­˜ç‡</li></ul><h2 id="åˆ†æåŸå› " tabindex="-1">åˆ†æåŸå›  <a class="header-anchor" href="#åˆ†æåŸå› " aria-label="Permalink to &quot;åˆ†æåŸå› &quot;">â€‹</a></h2><h3 id="_1-äºŒè€…åŒºåˆ«" tabindex="-1">1. äºŒè€…åŒºåˆ« <a class="header-anchor" href="#_1-äºŒè€…åŒºåˆ«" aria-label="Permalink to &quot;1. äºŒè€…åŒºåˆ«&quot;">â€‹</a></h3><ul><li>ç‚¹æ’­åå°ä½¿ç”¨<code>Vue-Cli 4</code>ï¼Œè€Œç›´æ’­åå°ä½¿ç”¨<code>Vue-Cli 5</code></li><li>åœ¨åŠ è½½æµç¨‹ä¸Šï¼Œç‚¹æ’­åå°å…±æœ‰==295==æ¬¡è¯·æ±‚è€Œç›´æ’­åå°ä»…==53==æ¬¡è¯·æ±‚ï¼Œå…¶ä¸­ï¼Œ==295==æœ‰200+æ˜¯ç»†ç¢çš„<code>chunks</code>æ–‡ä»¶</li></ul><h3 id="_2-åŸå› " tabindex="-1">2. åŸå›  <a class="header-anchor" href="#_2-åŸå› " aria-label="Permalink to &quot;2. åŸå› &quot;">â€‹</a></h3><ul><li><p>ç»†ç¢<code>chunks</code>æå‰è¯·æ±‚é˜»å¡äº†é¡µé¢èµ„æºçš„è¯·æ±‚ä¸åŠ è½½ï¼Œè¿™äº›æ–‡ä»¶éƒ½é€šè¿‡<code>prefetch</code>è¿›è¡Œé¢„åŠ è½½ï¼Œå¯¼è‡´å…¶ä»–èµ„æºè¯·æ±‚å»¶å</p></li><li><p><code>chunks</code>ä½“ç§¯å¾ˆå°ï¼Œä½†æ˜¯æ•°é‡è¿‡å¤šï¼Œè€Œæµè§ˆå™¨ä¸€èˆ¬å¯¹åŒä¸€ä¸ª==åŸŸå==çš„è¯·æ±‚æœ‰æ‰€é™åˆ¶ï¼ˆChromeä¸€èˆ¬ä¸å¤šäº6ä¸ªï¼‰ï¼Œå¯¼è‡´ç­‰å¾…200å¤šä¸ªè¯·æ±‚éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´ã€‚</p><p>::: tips ä¸€ä¸ªè¡¥å……</p><p>Chromeç¡®å®æ˜¯å¯¹åŒä¸€ä¸ªåŸŸåä¸‹çš„å¹¶å‘è¯·æ±‚çš„ä¸ªæ•°æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸åŒçš„<code>GET/POST</code>è¯·æ±‚çš„é™åˆ¶ä¸º6ä¸ªï¼ˆä½¿ç”¨<code>HTTP/2.0+</code> æˆ–è€… <code>HTTPS</code>å³å¯çªç ´)ï¼Œè€Œ==åŒä¸€ä¸ª==<code>GET</code>è¯·æ±‚ï¼Œä¼šä¾æ¬¡ä¸€ä¸ªä¸€ä¸ªçš„æ‰§è¡Œã€‚</p><p>ä½†æ˜¯å½“è¯·æ±‚é™æ­¢ç­‰å¾…==20s==åï¼Œè¿™äº›å‰©ä½™çš„ç›¸åŒ<code>GET</code>è¯·æ±‚ç…§æ ·ä¼šå¹¶å‘ã€‚è¿™é‡Œçš„åŸå› åœ¨äºï¼šChromeæµè§ˆå™¨çš„==getè¯·æ±‚ç¼“å­˜==ï¼Œå¯¹äºåŒä¸€ä¸ªURL+ç›¸åŒå‚æ•°å‘åå°å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœå‰ä¸€ä¸ªè¯·æ±‚æœªæ‰§è¡Œåä¸€ä¸ªè¯·æ±‚å°†è¢«é˜»å¡ï¼Œè€Œé˜»å¡çš„æ—¶é—´æœ€é•¿ä¸º==20s==ã€‚</p><p>:::</p></li><li><p>æœ‰çš„<code>JS</code>æ–‡ä»¶æ²¡æœ‰è¢«å‹ç¼©</p></li></ul><h2 id="è§£å†³æ–¹æ¡ˆ" tabindex="-1">è§£å†³æ–¹æ¡ˆ <a class="header-anchor" href="#è§£å†³æ–¹æ¡ˆ" aria-label="Permalink to &quot;è§£å†³æ–¹æ¡ˆ&quot;">â€‹</a></h2><h3 id="_1-é’ˆå¯¹ç»†ç¢chunks-prefetch-çš„æƒ…å†µ" tabindex="-1">1. é’ˆå¯¹ç»†ç¢<code>chunks prefetch </code> çš„æƒ…å†µ <a class="header-anchor" href="#_1-é’ˆå¯¹ç»†ç¢chunks-prefetch-çš„æƒ…å†µ" aria-label="Permalink to &quot;1. é’ˆå¯¹ç»†ç¢`chunks prefetch ` çš„æƒ…å†µ&quot;">â€‹</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li><p>ä»€ä¹ˆæ˜¯<code>prefetch</code></p><p>é¢„æå–(<code>prefetch</code>)æ˜¯ä¸€ç§æµè§ˆå™¨æœºåˆ¶ï¼Œåˆ©ç”¨æµè§ˆå™¨çš„==ç©ºé—²æ—¶é—´==åŠ è½½ç”¨æˆ·åœ¨å°†æ¥çš„ä¸ä¹…å¯èƒ½ä¼šè®¿é—®åˆ°çš„èµ„æºï¼Œå¹¶ä¸”ç¼“å­˜åˆ°å†…å­˜ä¸­ã€‚</p><p>åœ¨å®é™…è°ƒç”¨çš„æ—¶å€™ï¼Œå¯ä»¥èŠ‚çœèµ„æºåŠ è½½çš„æ—¶é—´ã€‚</p></li><li><p>ä¸ºä»€ä¹ˆä¼šå‡ºç°<code>prefetch</code></p><p>åŸå› åœ¨äº<code>Vue-Cli 4</code>é»˜è®¤å¼€å¯äº†<code>PreloadPlugin</code>æ’ä»¶ï¼Œä»–ä¼šæŠŠèµ„æºçš„linkæ·»åŠ <code>html</code>ä¸­ï¼Œå¹¶ä¸”æ·»åŠ ä¸Š<code>rel=&quot;prefetch&quot;</code>ï¼Œè€Œ<code>Vue-Cli 5</code>æ˜¯é»˜è®¤å…³é—­çš„ã€‚</p><p><img src="'+r+'" alt="image-20230504214109485"></p></li><li><p>ä¸ºä»€ä¹ˆ<code>prefetch</code>ä¼šåœ¨é¡µé¢èµ„æºåŠ è½½å‰å»åŠ è½½å‘¢ ğŸ•µï¸</p><p>è¿™ä¸æµè§ˆå™¨çš„åŠ è½½æœºåˆ¶ç›¸å…³ï¼Œ<code>ç©ºé—²æ—¶é—´</code>å®é™…ä¸ŠæŒ‡çš„æ˜¯==é«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„é—´éš”æ—¶é—´==ï¼Œåœ¨è¿™ä¸ªæ—¶é—´ä¼šç”¨æ¥åŠ è½½ä½ä¼˜å…ˆçº§ä»»åŠ¡ã€‚è¿™ä¸ªæ—¶é—´å¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€æƒ³çš„ç­‰æ‰€æœ‰é«˜ä¼˜å…ˆçº§ä»»åŠ¡åŠ è½½å¥½åå†è¿›è¡ŒåŠ è½½ã€‚</p><p><img src="'+y+`" alt="image-20230504214337410"></p></li></ul></div><h4 id="æ–¹æ¡ˆ" tabindex="-1">æ–¹æ¡ˆï¼š <a class="header-anchor" href="#æ–¹æ¡ˆ" aria-label="Permalink to &quot;æ–¹æ¡ˆï¼š&quot;">â€‹</a></h4><ol><li>ç›´æ¥å…³é—­<code>preFetch</code>ï¼ˆä¸<code>Vue-Cli 5</code>ä¸€æ ·ï¼‰</li><li>åˆ©ç”¨å®šæ—¶å™¨ï¼Œå°†åŠ è½½çš„é¡ºåºæŒ‰ç…§æˆ‘ä»¬æ‰€æƒ³çš„é‚£æ ·åš</li></ol><p>è¿™é‡Œè¯´ä¸€ä¸‹å¦‚ä½•å®ç°ç¬¬äºŒç§æ–¹æ³•ã€‚</p><div class="tip custom-block"><p class="custom-block-title">å¦‚ä½•åˆ¤æ–­DOMæ˜¯å¦å·²ç»åŠ è½½æˆåŠŸï¼Ÿ</p><p>ä»¥ä¸‹æ–¹æ³•èƒ½å¤ŸæˆåŠŸè·å–åˆ°DOMå…ƒç´ åï¼Œè¯´æ˜é¡µé¢åŠ è½½å®Œæˆäº†</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">addEvent</span><span style="color:#A6ACCD;">(window</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">load</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">document</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementByTagName</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span></span></code></pre></div><ul><li>é€šè¿‡<code>è½®è¯¢</code>åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿè·å–åˆ°<code>DOM</code>ï¼Œå¦‚æœå·²ç»è·å–åˆ°æŸä¸ª<code>DOM</code>å…ƒç´ ï¼Œè¯´æ˜åŠ è½½å®Œæˆæ—¢å¯ä»¥åŠ è½½<code>prefetch</code>èµ„æº</li><li>è¯¥<code>DOM</code>å…ƒç´ å¿…é¡»æ¯ä¸ªé¡µé¢éƒ½åŒ…å«</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//å»¶è¿ŸåŠ è½½prefetchèµ„æº</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> timer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">setInterval</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//ç”±äº.p-live-admin-appè¢«è·å–åˆ°æ—¶é¡µé¢å·²åŠ è½½å®Œæˆï¼Œ</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//é€šè¿‡è½®è¯¢åˆ¤æ–­æ˜¯å¦æœ‰è¯¥å…ƒç´ æ¥åˆ¤æ–­é¡µé¢æ˜¯å¦åŠ è½½å®Œæˆ</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//ä»è€ŒåŠ è½½prefetch èµ„æº</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lastChild</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.p-live-admin-app</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">lastchild</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">loadChunks</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        chunks</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">assetTypes</span><span style="color:#F07178;">:[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">css</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        prefetch</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">allChunkData</span></span>
<span class="line"><span style="color:#F07178;">    	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clearInterval</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#F78C6C;">3000</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div></div><p>â€‹</p><h3 id="_2-é’ˆå¯¹è¿‡å¤šç»†ç¢js-css" tabindex="-1">2. é’ˆå¯¹è¿‡å¤šç»†ç¢<code>js/css</code> <a class="header-anchor" href="#_2-é’ˆå¯¹è¿‡å¤šç»†ç¢js-css" aria-label="Permalink to &quot;2. é’ˆå¯¹è¿‡å¤šç»†ç¢\`js/css\`&quot;">â€‹</a></h3><h4 id="æ–¹æ¡ˆ-1" tabindex="-1">æ–¹æ¡ˆï¼š <a class="header-anchor" href="#æ–¹æ¡ˆ-1" aria-label="Permalink to &quot;æ–¹æ¡ˆï¼š&quot;">â€‹</a></h4><p>é€šè¿‡<code>WebPack</code>æ’ä»¶åœ¨æ‰“åŒ…æ—¶æŠŠç»†ç¢çš„<code>js</code>ä¸<code>css</code>åˆå¹¶ã€‚</p><p>é€šè¿‡<code>MinChunkSizePlugin</code>æ’ä»¶ï¼Œåˆå¹¶å°äº<code>minChunkSize</code>çš„æ–‡ä»¶ä¿æŒ<code>chunk</code>çš„æœ€å°å¤§å°ï¼Œå•ä½æ˜¯<code>Byte</code>ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// webpack.config.js</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">minChunkSizePlugin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> webpack</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">optimize</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">minChunkSizePlugin</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">minChunkSize</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">minChunkSize</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><h3 id="_3-é’ˆå¯¹æŸäº›jsæ–‡ä»¶æ²¡æœ‰å‹ç¼©" tabindex="-1">3. é’ˆå¯¹æŸäº›<code>JS</code>æ–‡ä»¶æ²¡æœ‰å‹ç¼© <a class="header-anchor" href="#_3-é’ˆå¯¹æŸäº›jsæ–‡ä»¶æ²¡æœ‰å‹ç¼©" aria-label="Permalink to &quot;3. é’ˆå¯¹æŸäº›\`JS\`æ–‡ä»¶æ²¡æœ‰å‹ç¼©&quot;">â€‹</a></h3><h4 id="æ–¹æ¡ˆ-2" tabindex="-1">æ–¹æ¡ˆ <a class="header-anchor" href="#æ–¹æ¡ˆ-2" aria-label="Permalink to &quot;æ–¹æ¡ˆ&quot;">â€‹</a></h4><ul><li>æ‰‹åŠ¨ä½¿ç”¨æŒ‡ä»¤å‹ç¼©ä»£ç ï¼Œå¹¶ä¸”æ‰‹åŠ¨<code>inline</code></li><li>è‡ªå®šä¹‰æ’ä»¶å®ç°æ¯æ¬¡æ‰“åŒ…çš„æ—¶å€™è‡ªåŠ¨æ“ä½œ</li></ul><h6 id="å‹ç¼©-terser-uglify" tabindex="-1">å‹ç¼©: <code>terser | uglify</code> <a class="header-anchor" href="#å‹ç¼©-terser-uglify" aria-label="Permalink to &quot;å‹ç¼©: \`terser | uglify\`&quot;">â€‹</a></h6><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// terser</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> fs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> minify </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">terser</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">minify</span><span style="color:#A6ACCD;">(fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFileSync</span><span style="color:#A6ACCD;">(file</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// uglify</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> fs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> minify </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">uglify-js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">minify</span><span style="color:#A6ACCD;">(fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFileSync</span><span style="color:#A6ACCD;">(file</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h6 id="å†…è”-è·å–htmlåå°†jsæ”¾å…¥bodyåçš„scriptæ ‡ç­¾ä¸­" tabindex="-1">å†…è”ï¼šè·å–<code>HTML</code>åå°†<code>JS</code>æ”¾å…¥<code>body</code>åçš„<code>script</code>æ ‡ç­¾ä¸­ <a class="header-anchor" href="#å†…è”-è·å–htmlåå°†jsæ”¾å…¥bodyåçš„scriptæ ‡ç­¾ä¸­" aria-label="Permalink to &quot;å†…è”ï¼šè·å–\`HTML\`åå°†\`JS\`æ”¾å…¥\`body\`åçš„\`script\`æ ‡ç­¾ä¸­&quot;">â€‹</a></h6><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">inlineJs</span><span style="color:#A6ACCD;">(optionPath</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> htmlData) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">minify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFileSync</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">optionPath</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">code</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// optionPathä¸ºéœ€è¦å‹ç¼©å†…è”çš„JSçš„è·¯å¾„</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scriptCode</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">&lt;script&gt;</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">&lt;/script&gt;</span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">htmlStr</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">htmlData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">html</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">htmlStr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">RegExp</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;/body&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scriptCode</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;/body&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å†…è”è‡³bodyæœ€åé¢</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h6 id="å¤„ç†æ—¶æœº-åœ¨html-webpack-pluginçš„htmlwebpackpluginafterhtmlprocessingé’©å­ä¸­è·å–html" tabindex="-1">å¤„ç†æ—¶æœºï¼šåœ¨<code>html-webpack-plugin</code>çš„<code>htmlWebpackPluginAfterHtmlProcessing</code>é’©å­ä¸­è·å–<code>html</code> <a class="header-anchor" href="#å¤„ç†æ—¶æœº-åœ¨html-webpack-pluginçš„htmlwebpackpluginafterhtmlprocessingé’©å­ä¸­è·å–html" aria-label="Permalink to &quot;å¤„ç†æ—¶æœºï¼šåœ¨\`html-webpack-plugin\`çš„\`htmlWebpackPluginAfterHtmlProcessing\`é’©å­ä¸­è·å–\`html\`&quot;">â€‹</a></h6><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">compilation</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">hooks</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">htmlWebpackPluginAfterHtmlProcessing</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">tap</span></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GenTemplatePlugin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">htmlData</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">htmlData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">plugin</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">meta</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">moreTemplateDisabled</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">htmlData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">html</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">removeLink</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">htmlData</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">htmlData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">html</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">inlineJs</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">loadPath</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">htmlData</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h2 id="ä»£ç æ€»ç»“" tabindex="-1">ä»£ç æ€»ç»“ <a class="header-anchor" href="#ä»£ç æ€»ç»“" aria-label="Permalink to &quot;ä»£ç æ€»ç»“&quot;">â€‹</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> AssetsPlugin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">assets-webpack-plugin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> webpack </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">webpack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> fs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> minify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">terser</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">GenTemplatePlugin</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">minChunkSize</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">minChunkSize</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">loadPath</span><span style="color:#89DDFF;">=this.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">loadPath</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// loadAssets.jsæ–‡ä»¶çš„ä½ç½®</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">outputPath</span><span style="color:#89DDFF;">=this,</span><span style="color:#A6ACCD;">ptions</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">outputPath</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// ç”Ÿæˆå¤šæ¨¡æ¿åŠ æˆªæ–‡ä»¶çš„ä½ç½®</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">filename</span><span style="color:#89DDFF;">=this.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">filename</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">// ç”Ÿæˆå¤šæ¨¡æ¿åŠ è½½æ–‡ä»¶çš„åç§°</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">resources</span><span style="color:#89DDFF;">=this.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">resources</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">// é™¤chunkå¤–çš„èµ„æºæ–‡ä»¶</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">minChunkSizePlugin</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">webpack</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">optimize</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">MinChunkSizePlugin</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    		minChunkSize</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">minChunkSize</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">assetsPlugin</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">AssetsPlugin</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    		filename</span><span style="color:#89DDFF;">:this.</span><span style="color:#A6ACCD;">filename</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    		prettyPrint</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    		path</span><span style="color:#89DDFF;">:this.</span><span style="color:#A6ACCD;">outputPath</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    		includeAllFileTypes</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div>`,31);function C(d,h,u,m,f,g){const n=o("Mermaid");return p(),e("div",null,[F,i,t(n,{id:"mermaid_1a962850",graph:"pie%0A%20%20%22%E7%82%B9%E6%92%AD%E5%90%8E%E5%8F%B0%202.5-3s%22%3A%202.5%0A%20%20%22%E7%9B%B4%E6%92%AD%E5%90%8E%E5%8F%B0%201.5-2.5s%22%3A%201.5"}),A])}const k=l(D,[["render",C]]);export{b as __pageData,k as default};
